#!/usr/bin/env bash

# This simple script launches the default terminal with the command passed to it as an argument.
# Currently, only Alacritty is supported, but other terminals will be supported as well.

source "$VIBRANIUM_PATH/vibranium-core-defaults"

args=()

case "$VIBRANIUM_DEFAULT_TERMINAL" in
	"alacritty")
		# If at least one active Alacritty window already exists, 
		# send an IPC signal to create a new window in the same process to save RAM.
		if pidof alacritty >/dev/null; then
			args+=(msg create-window)
		fi

		if command -v "$1" >/dev/null; then
			args+=(-e)
		fi
		;;
esac


exec setsid uwsm app -- "$VIBRANIUM_DEFAULT_TERMINAL" "${args[@]}" "$@"
