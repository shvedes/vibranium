#!/usr/bin/env bash

if pidof gpu-screen-recorder >/dev/null; then
	vibranium-core-recording
	exit 0
fi

source "$VIBRANIUM_PATH/vibranium-core-lib"

OPTIONS=("Screen" "Window" "Region")
CHOSEN="$(printf "%s\n" "${OPTIONS[@]}" | rofi_cmd "Capture" "ESC to exit")"

[ -z "$CHOSEN" ] && exit 0
printf "%s\n" "${OPTIONS[@]}" | grep -qxF "$CHOSEN" || exit 0
exec setsid vibranium-cmd-launch-cmd vibranium-core-recording "${CHOSEN,,}"
